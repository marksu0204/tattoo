import{t as e}from"./arrow-left-mvEJW8ZQ.js";import{t}from"./calendar-4kT8YPNI.js";import{t as n}from"./circle-check-big-CL4BxBfE.js";import{n as r,t as i}from"./file-text-C6cU2RCp.js";import{t as a}from"./message-circle-BtpWNYDD.js";import{_ as o,a as s,d as c,m as l,n as u,o as d,r as f,s as p,t as m,u as h,v as g}from"./index-C_gUkn22.js";var _=p(`wifi-off`,[[`path`,{d:`M12 20h.01`,key:`zekei9`}],[`path`,{d:`M8.5 16.429a5 5 0 0 1 7 0`,key:`1bycff`}],[`path`,{d:`M5 12.859a10 10 0 0 1 5.17-2.69`,key:`1dl1wf`}],[`path`,{d:`M19 12.859a10 10 0 0 0-2.007-1.523`,key:`4k23kn`}],[`path`,{d:`M2 8.82a15 15 0 0 1 4.177-2.643`,key:`1grhjp`}],[`path`,{d:`M22 8.82a15 15 0 0 0-11.288-3.764`,key:`z3jwby`}],[`path`,{d:`m2 2 20 20`,key:`1ooewy`}]]),v=g(o(),1),y=u(),b=()=>{let{user:o,logout:u}=m(),p=l(),[g,b]=(0,v.useState)([]),[x,S]=(0,v.useState)(!0),[C,w]=(0,v.useState)(``);(0,v.useEffect)(()=>{o&&T()},[o]);let T=async()=>{if(o){S(!0),w(``);try{b(await f.getUserAppointments(o.id))}catch(e){console.error(`Failed to load user appointments`,e),w(`ç„¡æ³•è¼‰å…¥é ç´„è³‡æ–™ï¼Œè«‹æª¢æŸ¥ç¶²è·¯é€£ç·šã€‚`)}finally{S(!1)}}},E=e=>{let t=e.artworkTitle?`é ç´„åœ–æ¡ˆ: ${e.artworkTitle}`:`ä¸€èˆ¬è«®è©¢`,n=`ä½ å¥½ï¼æˆ‘æƒ³è®Šæ›´ä»¥ä¸‹é ç´„ï¼š\n\nðŸ“… æ—¥æœŸ: ${e.date}\nâ° æ™‚é–“: ${e.timeSlot}\nðŸ“ å…§å®¹: ${t}\n\nè«‹å•æœ‰å“ªäº›æ™‚æ®µå¯ä»¥èª¿æ•´ï¼Ÿ`;return`https://line.me/R/oaMessage/@${h}/?${encodeURIComponent(n)}`},D=e=>{let t=e.artworkTitle?`é ç´„åœ–æ¡ˆ: ${e.artworkTitle}`:`ä¸€èˆ¬è«®è©¢`,n=`ä½ å¥½ï¼æˆ‘æƒ³è®Šæ›´ä»¥ä¸‹é ç´„ï¼š\n\nðŸ“… æ—¥æœŸ: ${e.date}\nâ° æ™‚é–“: ${e.timeSlot}\nðŸ“ å…§å®¹: ${t}\n\nè«‹å•æœ‰å“ªäº›æ™‚æ®µå¯ä»¥èª¿æ•´ï¼Ÿ`;navigator.clipboard.writeText(n).catch(()=>{})},O=e=>e===`BOOKED`?(0,y.jsxs)(`span`,{className:`text-green-400 bg-green-900/30 px-2 py-0.5 rounded text-[10px] flex items-center gap-1`,children:[(0,y.jsx)(n,{size:10}),` å·²ç¢ºèª`]}):e===`SIGNED`?(0,y.jsxs)(`span`,{className:`text-purple-400 bg-purple-900/30 px-2 py-0.5 rounded text-[10px] flex items-center gap-1`,children:[(0,y.jsx)(n,{size:10}),` ç°½å±¬å®Œæˆ`]}):e===`SIGNING`?(0,y.jsxs)(`span`,{className:`text-blue-400 bg-blue-900/30 px-2 py-0.5 rounded text-[10px] flex items-center gap-1`,children:[(0,y.jsx)(i,{size:10}),` ç°½å±¬ä¸­`]}):e===`WAITING_PAYMENT`?(0,y.jsxs)(`span`,{className:`text-orange-400 bg-orange-900/30 px-2 py-0.5 rounded text-[10px] flex items-center gap-1`,children:[(0,y.jsx)(r,{size:10}),` å¾…ä»˜æ¬¾`]}):e===`PENDING`?(0,y.jsxs)(`span`,{className:`text-yellow-400 bg-yellow-900/30 px-2 py-0.5 rounded text-[10px] flex items-center gap-1`,children:[(0,y.jsx)(r,{size:10}),` å¾…å¯©æ ¸`]}):null;return o?(0,y.jsxs)(`div`,{className:`max-w-2xl mx-auto px-4 py-8`,children:[(0,y.jsxs)(`button`,{onClick:()=>p(`/`),className:`flex items-center text-gray-400 hover:text-white mb-6`,children:[(0,y.jsx)(e,{size:20,className:`mr-2`}),` è¿”å›žé¦–é `]}),(0,y.jsxs)(`div`,{className:`bg-card rounded-2xl border border-white/10 shadow-2xl overflow-hidden`,children:[(0,y.jsx)(`div`,{className:`p-6 border-b border-white/10 bg-dark/50`,children:(0,y.jsx)(`h1`,{className:`text-2xl font-bold text-white`,children:`æœƒå“¡å€‹äººæª”æ¡ˆ`})}),(0,y.jsxs)(`div`,{className:`p-6`,children:[(0,y.jsxs)(`div`,{className:`flex items-center gap-4 mb-8`,children:[o.avatarUrl?(0,y.jsx)(`img`,{src:o.avatarUrl,alt:o.name,className:`w-20 h-20 rounded-full border-2 border-primary`}):(0,y.jsx)(`div`,{className:`w-20 h-20 rounded-full bg-gray-700 flex items-center justify-center`,children:(0,y.jsx)(s,{size:40})}),(0,y.jsxs)(`div`,{children:[(0,y.jsx)(`p`,{className:`text-xl font-bold text-white`,children:o.name}),(0,y.jsxs)(`p`,{className:`text-sm text-gray-500`,children:[`èº«ä»½: `,o.role===c.ADMIN?`ç®¡ç†å“¡`:`æœƒå“¡`]}),o.email&&(0,y.jsx)(`p`,{className:`text-sm text-gray-500`,children:o.email})]})]}),(0,y.jsxs)(`h3`,{className:`text-primary font-bold mb-4 flex items-center gap-2 text-lg border-b border-gray-700 pb-2`,children:[(0,y.jsx)(t,{size:20}),` æˆ‘çš„é ç´„`]}),(0,y.jsx)(`div`,{className:`space-y-3 mb-8`,children:x?(0,y.jsx)(`p`,{className:`text-gray-500`,children:`è¼‰å…¥ä¸­...`}):C?(0,y.jsxs)(`div`,{className:`text-center py-8 bg-red-900/10 rounded-lg border border-red-900/30`,children:[(0,y.jsx)(_,{className:`mx-auto text-red-400 mb-2`}),(0,y.jsx)(`p`,{className:`text-red-300 mb-2`,children:C}),(0,y.jsx)(`button`,{onClick:T,className:`text-white bg-red-900/50 px-4 py-2 rounded hover:bg-red-800 text-sm`,children:`é‡è©¦`})]}):g.length===0?(0,y.jsxs)(`div`,{className:`text-center py-8 bg-white/5 rounded-lg border border-dashed border-gray-700`,children:[(0,y.jsx)(`p`,{className:`text-gray-400 mb-2`,children:`ç›®å‰æ²’æœ‰é ç´„`}),(0,y.jsx)(`button`,{onClick:()=>p(`/calendar`),className:`text-primary text-sm hover:underline`,children:`å‰å¾€é ç´„è¡Œäº‹æ›†`})]}):g.map(e=>(0,y.jsxs)(`div`,{className:`bg-dark p-4 rounded-lg border border-gray-700`,children:[(0,y.jsxs)(`div`,{className:`flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4`,children:[(0,y.jsxs)(`div`,{className:`flex-1`,children:[(0,y.jsxs)(`div`,{className:`flex items-center gap-3 mb-1`,children:[(0,y.jsx)(`p`,{className:`text-white font-bold text-lg`,children:e.date}),(0,y.jsxs)(`span`,{className:`text-gray-400`,children:[`@ `,e.timeSlot]}),O(e.status)]}),e.artworkTitle?(0,y.jsxs)(`div`,{className:`flex gap-3 mt-2 bg-black/20 p-2 rounded`,children:[e.artworkImage&&(0,y.jsx)(`img`,{src:e.artworkImage,alt:``,className:`w-10 h-10 rounded object-cover`}),(0,y.jsxs)(`div`,{children:[(0,y.jsx)(`span`,{className:`text-xs text-gray-500 block`,children:`é ç´„åœ–æ¡ˆ`}),(0,y.jsx)(`span`,{className:`text-sm text-gray-300 font-medium`,children:e.artworkTitle})]})]}):(0,y.jsx)(`p`,{className:`text-sm text-gray-500 mt-1 italic`,children:e.notes||`ä¸€èˆ¬è«®è©¢`})]}),(0,y.jsxs)(`a`,{href:E(e),target:`_blank`,rel:`noreferrer`,onClick:()=>D(e),className:`text-blue-400 hover:text-blue-300 text-sm flex items-center gap-1 border border-blue-900/30 px-3 py-1.5 rounded hover:bg-blue-900/10 transition-colors no-underline shrink-0`,children:[(0,y.jsx)(a,{size:16}),` è®Šæ›´é ç´„`]})]}),(e.totalPrice||e.depositPaid)&&(0,y.jsx)(`div`,{className:`mt-3 pt-3 border-t border-gray-700/50`,children:(0,y.jsxs)(`div`,{className:`flex flex-wrap gap-4 text-sm`,children:[e.totalPrice&&(0,y.jsxs)(`div`,{className:`bg-white/5 px-3 py-2 rounded-lg`,children:[(0,y.jsx)(`span`,{className:`text-gray-400 block text-xs`,children:`ç¸½åƒ¹`}),(0,y.jsxs)(`span`,{className:`text-white font-bold`,children:[`NT$ `,e.totalPrice.toLocaleString()]})]}),e.depositPaid&&(0,y.jsxs)(`div`,{className:`bg-green-900/20 px-3 py-2 rounded-lg border border-green-900/30`,children:[(0,y.jsx)(`span`,{className:`text-green-400 block text-xs`,children:`å·²ä»˜è¨‚é‡‘`}),(0,y.jsxs)(`span`,{className:`text-green-300 font-bold`,children:[`NT$ `,e.depositPaid.toLocaleString()]})]}),e.totalPrice&&e.depositPaid&&(0,y.jsxs)(`div`,{className:`bg-yellow-900/20 px-3 py-2 rounded-lg border border-yellow-900/30`,children:[(0,y.jsx)(`span`,{className:`text-yellow-400 block text-xs`,children:`å°¾æ¬¾`}),(0,y.jsxs)(`span`,{className:`text-yellow-300 font-bold`,children:[`NT$ `,(e.totalPrice-e.depositPaid).toLocaleString()]})]})]})})]},e.id))}),(0,y.jsxs)(`button`,{onClick:()=>{u(),p(`/`)},className:`w-full bg-gray-800 hover:bg-gray-700 text-white py-3 rounded-lg font-bold transition-colors flex items-center justify-center gap-2`,children:[(0,y.jsx)(d,{size:18}),` ç™»å‡º`]})]})]})]}):(0,y.jsx)(`div`,{className:`pt-20 text-center text-gray-500`,children:`è«‹å…ˆç™»å…¥`})};export{b as default};