import{t as e}from"./arrow-left-mvEJW8ZQ.js";import{t}from"./calendar-4kT8YPNI.js";import{t as n}from"./circle-check-big-CL4BxBfE.js";import{n as r,t as i}from"./file-text-C6cU2RCp.js";import{t as a}from"./dollar-sign-COqTbmL_.js";import{_ as o,h as s,m as c,n as l,r as u,s as d,v as f}from"./index-C_gUkn22.js";var p=d(`map-pin`,[[`path`,{d:`M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0`,key:`1r0f0z`}],[`circle`,{cx:`12`,cy:`10`,r:`3`,key:`ilqhr7`}]]),m=d(`palette`,[[`path`,{d:`M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z`,key:`e79jfc`}],[`circle`,{cx:`13.5`,cy:`6.5`,r:`.5`,fill:`currentColor`,key:`1okk4w`}],[`circle`,{cx:`17.5`,cy:`10.5`,r:`.5`,fill:`currentColor`,key:`f64h9f`}],[`circle`,{cx:`6.5`,cy:`12.5`,r:`.5`,fill:`currentColor`,key:`qy21gx`}],[`circle`,{cx:`8.5`,cy:`7.5`,r:`.5`,fill:`currentColor`,key:`fotxhn`}]]),h=d(`ruler`,[[`path`,{d:`M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z`,key:`icamh8`}],[`path`,{d:`m14.5 12.5 2-2`,key:`inckbg`}],[`path`,{d:`m11.5 9.5 2-2`,key:`fmmyf7`}],[`path`,{d:`m8.5 6.5 2-2`,key:`vc6u1g`}],[`path`,{d:`m17.5 15.5 2-2`,key:`wo5hmg`}]]),g=f(o(),1),_=l(),v=()=>{let{appointmentId:o}=s(),l=c(),[d,f]=(0,g.useState)(null),[v,y]=(0,g.useState)(!0),[b,x]=(0,g.useState)(``);(0,g.useEffect)(()=>{S()},[o]);let S=async()=>{if(!o){x(`無效的訂單編號`),y(!1);return}y(!0),x(``);try{let e=await u.getAppointment(o);e?f(e):x(`找不到此訂單`)}catch(e){console.error(`Failed to load appointment`,e),x(`無法載入訂單資料，請檢查網路連線。`)}finally{y(!1)}};return v?(0,_.jsx)(`div`,{className:`min-h-screen bg-dark flex items-center justify-center`,children:(0,_.jsxs)(`div`,{className:`text-center`,children:[(0,_.jsx)(`div`,{className:`animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4`}),(0,_.jsx)(`p`,{className:`text-gray-400`,children:`載入中...`})]})}):b||!d?(0,_.jsx)(`div`,{className:`min-h-screen bg-dark flex items-center justify-center px-4`,children:(0,_.jsx)(`div`,{className:`text-center max-w-md`,children:(0,_.jsxs)(`div`,{className:`bg-red-900/20 border border-red-900/50 rounded-lg p-6`,children:[(0,_.jsx)(`p`,{className:`text-red-400 text-lg font-bold mb-4`,children:b||`找不到此訂單`}),(0,_.jsx)(`button`,{onClick:()=>l(`/`),className:`text-white bg-red-900/50 px-4 py-2 rounded hover:bg-red-800 transition-colors`,children:`返回首頁`})]})})}):(0,_.jsx)(`div`,{className:`min-h-screen bg-dark py-8 px-4`,children:(0,_.jsxs)(`div`,{className:`max-w-2xl mx-auto`,children:[(0,_.jsxs)(`button`,{onClick:()=>l(`/`),className:`flex items-center text-gray-400 hover:text-white mb-6`,children:[(0,_.jsx)(e,{size:20,className:`mr-2`}),` 返回首頁`]}),(0,_.jsxs)(`div`,{className:`bg-card rounded-2xl border border-white/10 shadow-2xl overflow-hidden`,children:[(0,_.jsxs)(`div`,{className:`bg-gradient-to-r from-primary/20 to-primary/10 p-6 border-b border-white/10`,children:[(0,_.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,_.jsx)(`h1`,{className:`text-2xl font-bold text-white`,children:`預約訂單詳情`}),(e=>{switch(e){case`OPEN`:return(0,_.jsx)(`span`,{className:`bg-green-900/30 text-green-400 border border-green-900/50 px-3 py-1 rounded text-sm font-bold`,children:`可預約`});case`PENDING`:return(0,_.jsxs)(`span`,{className:`bg-yellow-900/30 text-yellow-400 border border-yellow-900/50 px-3 py-1 rounded text-sm font-bold flex items-center gap-1`,children:[(0,_.jsx)(r,{size:14}),` 待審核`]});case`WAITING_PAYMENT`:return(0,_.jsxs)(`span`,{className:`bg-orange-900/30 text-orange-400 border border-orange-900/50 px-3 py-1 rounded text-sm font-bold flex items-center gap-1`,children:[(0,_.jsx)(r,{size:14}),` 待付款`]});case`SIGNING`:return(0,_.jsxs)(`span`,{className:`bg-blue-900/30 text-blue-400 border border-blue-900/50 px-3 py-1 rounded text-sm font-bold flex items-center gap-1`,children:[(0,_.jsx)(i,{size:14}),` 簽屬中`]});case`SIGNED`:return(0,_.jsxs)(`span`,{className:`bg-purple-900/30 text-purple-400 border border-purple-900/50 px-3 py-1 rounded text-sm font-bold flex items-center gap-1`,children:[(0,_.jsx)(n,{size:14}),` 簽屬完成`]});case`BOOKED`:return(0,_.jsxs)(`span`,{className:`bg-green-900/30 text-green-400 border border-green-900/50 px-3 py-1 rounded text-sm font-bold flex items-center gap-1`,children:[(0,_.jsx)(n,{size:14}),` 已確認`]});case`COMPLETED`:return(0,_.jsx)(`span`,{className:`bg-gray-700 text-gray-400 border border-gray-600 px-3 py-1 rounded text-sm font-bold`,children:`已完成`});default:return null}})(d.status)]}),(0,_.jsxs)(`p`,{className:`text-gray-400 text-sm mt-2`,children:[`訂單編號: `,d.id]})]}),(0,_.jsxs)(`div`,{className:`p-6 space-y-6`,children:[(0,_.jsxs)(`div`,{className:`bg-dark/50 rounded-lg p-4 border border-white/5`,children:[(0,_.jsxs)(`h2`,{className:`text-lg font-bold text-white mb-4 flex items-center gap-2`,children:[(0,_.jsx)(t,{size:20,className:`text-primary`}),`預約資訊`]}),(0,_.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-2 gap-4`,children:[(0,_.jsxs)(`div`,{children:[(0,_.jsx)(`span`,{className:`text-gray-400 text-sm block mb-1`,children:`預約日期`}),(0,_.jsx)(`span`,{className:`text-white font-bold text-lg`,children:d.date})]}),(0,_.jsxs)(`div`,{children:[(0,_.jsx)(`span`,{className:`text-gray-400 text-sm block mb-1`,children:`時間`}),(0,_.jsxs)(`span`,{className:`text-white font-bold text-lg flex items-center gap-2`,children:[(0,_.jsx)(r,{size:16,className:`text-primary`}),d.timeSlot]})]}),(0,_.jsxs)(`div`,{children:[(0,_.jsx)(`span`,{className:`text-gray-400 text-sm block mb-1`,children:`顧客姓名`}),(0,_.jsx)(`span`,{className:`text-white font-medium`,children:d.customerName||`-`})]}),d.phoneNumber&&(0,_.jsxs)(`div`,{children:[(0,_.jsx)(`span`,{className:`text-gray-400 text-sm block mb-1`,children:`聯絡電話`}),(0,_.jsx)(`span`,{className:`text-white font-medium`,children:d.phoneNumber})]})]})]}),d.artworkTitle&&(0,_.jsxs)(`div`,{className:`bg-dark/50 rounded-lg p-4 border border-white/5`,children:[(0,_.jsx)(`h2`,{className:`text-lg font-bold text-white mb-4`,children:`圖案資訊`}),(0,_.jsxs)(`div`,{className:`flex gap-4`,children:[d.artworkImage&&(0,_.jsx)(`img`,{src:d.artworkImage,alt:d.artworkTitle,className:`w-24 h-24 rounded-lg object-cover border border-white/10`}),(0,_.jsxs)(`div`,{className:`flex-1`,children:[(0,_.jsx)(`span`,{className:`text-gray-400 text-sm block mb-1`,children:`圖案名稱`}),(0,_.jsx)(`span`,{className:`text-white font-bold text-lg`,children:d.artworkTitle})]})]})]}),(d.tattooPosition||d.tattooSize||d.tattooColor)&&(0,_.jsxs)(`div`,{className:`bg-dark/50 rounded-lg p-4 border border-white/5`,children:[(0,_.jsx)(`h2`,{className:`text-lg font-bold text-white mb-4`,children:`刺青細節`}),(0,_.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-3 gap-4`,children:[d.tattooPosition&&(0,_.jsxs)(`div`,{children:[(0,_.jsxs)(`span`,{className:`text-gray-400 text-sm block mb-1 flex items-center gap-1`,children:[(0,_.jsx)(p,{size:14}),` 部位`]}),(0,_.jsx)(`span`,{className:`text-white font-medium`,children:d.tattooPosition})]}),d.tattooSize&&(0,_.jsxs)(`div`,{children:[(0,_.jsxs)(`span`,{className:`text-gray-400 text-sm block mb-1 flex items-center gap-1`,children:[(0,_.jsx)(h,{size:14}),` 大小`]}),(0,_.jsx)(`span`,{className:`text-white font-medium`,children:d.tattooSize})]}),d.tattooColor&&(0,_.jsxs)(`div`,{children:[(0,_.jsxs)(`span`,{className:`text-gray-400 text-sm block mb-1 flex items-center gap-1`,children:[(0,_.jsx)(m,{size:14}),` 色彩`]}),(0,_.jsx)(`span`,{className:`text-white font-medium`,children:d.tattooColor})]})]})]}),(d.totalPrice||d.depositPaid)&&(0,_.jsxs)(`div`,{className:`bg-dark/50 rounded-lg p-4 border border-white/5`,children:[(0,_.jsxs)(`h2`,{className:`text-lg font-bold text-white mb-4 flex items-center gap-2`,children:[(0,_.jsx)(a,{size:20,className:`text-primary`}),`價格資訊`]}),(0,_.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-3 gap-4`,children:[d.totalPrice&&(0,_.jsxs)(`div`,{className:`bg-white/5 px-4 py-3 rounded-lg`,children:[(0,_.jsx)(`span`,{className:`text-gray-400 block text-sm mb-1`,children:`總價`}),(0,_.jsxs)(`span`,{className:`text-white font-bold text-xl`,children:[`NT$ `,d.totalPrice.toLocaleString()]})]}),d.depositPaid&&(0,_.jsxs)(`div`,{className:`bg-green-900/20 px-4 py-3 rounded-lg border border-green-900/30`,children:[(0,_.jsx)(`span`,{className:`text-green-400 block text-sm mb-1`,children:`已付訂金`}),(0,_.jsxs)(`span`,{className:`text-green-300 font-bold text-xl`,children:[`NT$ `,d.depositPaid.toLocaleString()]})]}),d.totalPrice&&d.depositPaid&&(0,_.jsxs)(`div`,{className:`bg-yellow-900/20 px-4 py-3 rounded-lg border border-yellow-900/30`,children:[(0,_.jsx)(`span`,{className:`text-yellow-400 block text-sm mb-1`,children:`餘額`}),(0,_.jsxs)(`span`,{className:`text-yellow-300 font-bold text-xl`,children:[`NT$ `,(d.totalPrice-d.depositPaid).toLocaleString()]})]})]})]}),d.notes&&(0,_.jsxs)(`div`,{className:`bg-dark/50 rounded-lg p-4 border border-white/5`,children:[(0,_.jsx)(`h2`,{className:`text-lg font-bold text-white mb-2`,children:`備註`}),(0,_.jsx)(`p`,{className:`text-gray-300 whitespace-pre-wrap`,children:d.notes})]}),d.signedAt&&(0,_.jsxs)(`div`,{className:`bg-dark/50 rounded-lg p-4 border border-white/5`,children:[(0,_.jsxs)(`h2`,{className:`text-lg font-bold text-white mb-4 flex items-center gap-2`,children:[(0,_.jsx)(i,{size:20,className:`text-primary`}),`簽署資訊`]}),(0,_.jsxs)(`div`,{className:`space-y-2`,children:[(0,_.jsxs)(`div`,{children:[(0,_.jsx)(`span`,{className:`text-gray-400 text-sm`,children:`簽署時間`}),(0,_.jsx)(`p`,{className:`text-white font-medium`,children:d.signedAt})]}),d.signerName&&(0,_.jsxs)(`div`,{children:[(0,_.jsx)(`span`,{className:`text-gray-400 text-sm`,children:`簽署人`}),(0,_.jsx)(`p`,{className:`text-white font-medium`,children:d.signerName})]}),d.signatureData&&(0,_.jsxs)(`div`,{className:`mt-4`,children:[(0,_.jsx)(`span`,{className:`text-gray-400 text-sm block mb-2`,children:`簽名`}),(0,_.jsx)(`div`,{className:`bg-white rounded p-2 border border-white/10`,children:(0,_.jsx)(`img`,{src:d.signatureData,alt:`簽名`,className:`max-h-32 mx-auto`})})]})]})]}),d.status!==`OPEN`&&(0,_.jsx)(`div`,{className:`bg-blue-900/20 rounded-lg p-4 border border-blue-900/30`,children:(0,_.jsxs)(`div`,{className:`flex items-center justify-between`,children:[(0,_.jsxs)(`div`,{children:[(0,_.jsx)(`p`,{className:`text-blue-300 font-bold mb-1`,children:`查看同意書`}),(0,_.jsx)(`p`,{className:`text-blue-400 text-sm`,children:`點擊按鈕查看或下載同意書`})]}),(0,_.jsxs)(`button`,{onClick:()=>l(`/consent/${d.id}`),className:`bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-bold transition-colors flex items-center gap-2`,children:[(0,_.jsx)(i,{size:18}),`查看同意書`]})]})})]})]})]})})};export{v as default};